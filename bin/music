#!/bin/bash

# This doesn't actually work correctly in many cases

case "$1" in
    play)
        case "$2" in
            album)
                artist="$(mpc list artist | dmenu -b -i -l 50 -p 'Artist')"
                [ -z "${artist}" ] && exit
                album="$(mpc list album artist "${artist}" | dmenu -b -i -l 50 -p 'Album')"
                [ -z "${album}" ] && exit
                mpc clear
                mpc add "${artist}/${album}"
                mpc play ;;
            artist)
                artist="$(mpc list artist | dmenu -b -i -l 50 -p 'Artist')"
                [ -z "${artist}" ] && exit
                mpc clear
                mpc add "${artist}"
                mpc play ;;
            song)
                artist="$(mpc list artist | dmenu -b -i -l 50 -p 'Artist')"
                [ -z "${artist}" ] && exit
                title="$(mpc list title artist "${artist}" | dmenu -b -i -l 50 -p 'Song')"
                [ -z "${title}" ] && exit
                mpc clear
                mpc findadd artist "${artist}" title "${title}"
                mpc play ;;
            esac ;;
    add)
        case "$2" in
            album)
                artist="$(mpc list artist | dmenu -b -i -l 50 -p 'Artist')"
                [ -z "${artist}" ] && exit
                album="$(mpc list album artist "${artist}" | dmenu -b -i -l 50 -p 'Album')"
                [ -z "${album}" ] && exit
                mpc add "${artist}/${album}" ;;
            artist)
                artist="$(mpc list artist | dmenu -b -i -l 50 -p 'Artist')"
                [ -z "${artist}" ] && exit
                mpc add "${artist}" ;;
            song)
                artist="$(mpc list artist | dmenu -b -i -l 50 -p 'Artist')"
                [ -z "${artist}" ] && exit
                title="$(mpc list title artist "${artist}" | dmenu -b -i -l 50 -p 'Song')"
                [ -z "${title}" ] && exit
                mpc findadd artist "${artist}" title "${title}" ;;
            esac ;;
    vol)
        case "$2" in
            up)
                mpc volume +5 ;;
            down)
                mpc volume -5 ;;
        esac ;;
    playlist)
        song="$(mpc playlist --format "%position% %artist% %title%" | dmenu -b -i -l 50 -p "Find" | cut -d' ' --format=1)" 
        [ -z "${song}" ] && exit
        mpc play ${song} ;;
    toggle)
        mpc toggle ;;
    stop)
        mpc stop ;;
    next)
        mpc next ;;
    prev)
        mpc prev ;;
    current)
        notify-send -u low "$(mpc current --format "%artist% >> %album% >> %title%")" ;;
    now)
        echo "$(mpc current --format "%artist% - %album% - %title%")"
esac
